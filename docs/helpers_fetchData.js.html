<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: helpers/fetchData.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: helpers/fetchData.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const fetch = require('node-fetch');
/**
 * @author Pablo
 * @exports Object
 * @namespace fetchData
 */

/**
 * Helper reutilizable para realizar todas las consultas fetch
 * @memberof fetchData
 * @method fetchData
 * @async
 * @param {String} url La url para pasar al método fetch
 * @param {String} method El método para pasar al método fetch
 * @param {Object} [body] El body con la información para pasar al método fetch
 * @returns {Object} Devuelve la respuesta de la consulta del fetch
 * @throws {Object} Devuelve los errores en un Object
 */
const fetchData = async (url, method, body) => {

    body = JSON.stringify(body);
    let options = {};

    if (method == 'POST' || method == 'PUT')
        options = {
            method,
            headers: { 'Content-Type': 'application/json' },
            body
        };

    else if (method == 'DELETE')
        options = { method };


    try {

        const request = await fetch(url, options);
        const response = await request.json();

        if (!response)
            return {
                ok: false,
                msg: 'Error fetchData',
                response
            };

        return {
            ok: true,
            data: response
        };

    } catch (e) {
        console.log('catchError en fetchData', e);

        return {
            ok: false,
            error: e
        };

    };
};


module.exports = { fetchData }</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="controllerAdmin.html">controllerAdmin</a></li><li><a href="controllerFront.html">controllerFront</a></li><li><a href="controllerUser.html">controllerUser</a></li><li><a href="cookies.html">cookies</a></li><li><a href="fetchData.html">fetchData</a></li><li><a href="getURLs.html">getURLs</a></li><li><a href="isAdmin.html">isAdmin</a></li><li><a href="jwt.html">jwt</a></li><li><a href="validateJWT.html">validateJWT</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Apr 12 2023 09:18:12 GMT+0200 (hora de verano de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
